<!--
title: ROBOCOPY
description: 
published: true
date: 2023-09-18T12:39:00.733Z
tags: 
editor: ckeditor
dateCreated: 2023-09-18T12:38:59.035Z
-->

<h1>Copy Standard</h1>
<pre><code class="language-plaintext">robocopy origine destination /E /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:16 /TEE /V /X /DST</code></pre>
<h1>Sauvegarde Standard (!! Suppression fichiers dans la destination !!)</h1>
<pre><code class="language-plaintext">robocopy origine destination /MIR /DCOPY:T /R:3 /W:5 /MT:16 /TEE /V /X /DST</code></pre>
<p>robocopy D:\DATA\ISO \\vmbosmb\Storage\ISO /E /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:16 /TEE /V /X /DST</p>
<p>&nbsp;</p>
<p>COPIE PROFIL POSTE USER :</p>
<p>Création dossier :&nbsp;</p>
<p>Sauvegarde : robocopy %homepath% %homepath%_BCKP /R:3 /W:5 /MT:8 /TEE /V /X /DST</p>
<p>Restauration : robocopy c:\users\F44_BCKP c:\users\F44 /R:3 /W:5 /MT:8 /TEE /V /X /DST</p>
<p>&nbsp;</p>
<p>Copy data perso from mbohc to smbonas : OPTION /L pour simuler la copie</p>
<p>&nbsp;</p>
<p>robocopy D:\NextCloud \\smbonas\NAS /MIR /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:8 /TEE /V /X /DST&nbsp;</p>
<p>robocopy D:\NextCloud E:\DATA /MIR /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:16 /TEE /V /X /DST</p>
<p>robocopy D:\DATA2 E:\DATA /MIR /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:16 /TEE /V /X /DST</p>
<p>robocopy D:\DATA\Films\1K E:\DATA\Films\1K /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:16 /TEE /V /X /DST</p>
<p>&nbsp;</p>
<p>robocopy D:\NextCloud \\smbosmb\storage /MIR /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:8 /TEE /V /X /DST /L&nbsp; ==&gt; Simulation avec l'option /L</p>
<p>&nbsp;</p>
<p>robocopy "C:\SalesLogix\Sync Logs\Documents" <a href="file://vdcsslxlec02.cyborg.dom/Documents">\\vdcsslxlec02.cyborg.dom\Documents</a> /E /DCOPY:T /R:3 /W:5 /TEE /V /X /DST /LOG+:C:\Users\mbo_admin\desktop\slx_pj.txt</p>
<p>&nbsp;</p>
<p>robocopy "c:\users\A09\desktop"&nbsp; "<a href="file://por2022088/c$/users/a09/desktop">\\por2022088\c$\users\a09\desktop</a>" /MIR /DCOPY:T /R:3 /W:5 /TEE /V /X /DST /MT:16</p>
<p>&nbsp;</p>
<p>robocopy <a href="file://svdahyv01/d$/MSSCVMMLibrary/ISOs/2019">\\svdahyv01\d$\MSSCVMMLibrary\ISOs\2019</a> d:\ISO fr_windows_server_2019_updated_march_2019_x64_dvd_afbb129f.iso /COPY:DAT /R:3 /W:5 /TEE /V /IPG:200</p>
<p>&nbsp;</p>
<p>Copy DEV: A FAIRE DEPUIS LE SERVEUR VDCSFIC01 OU DE DESTINANTION</p>
<p>Test sur un rep =&gt; robocopy "<a href="file://nas.arcadie-informatique.net/Service%20Developpement/Jeux%20d'installations">\\nas.arcadie-informatique.net\Service Developpement\Jeux d'installations</a>" "<a href="file://vdcsfic01.cyborg.dom/Commonmar$/Developpeurs/@DEV_TLS/Jeux%20d'installations">\\vdcsfic01.cyborg.dom\Commonmar$\Developpeurs\@DEV_TLS\Jeux d'installations</a>" /E /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:8 /LOG+:c:\Users\a09_admin\Documents\copyservicedev.txt</p>
<p>Rep service DEV complet =&gt; robocopy "<a href="file://nas.arcadie-informatique.net/Service%20Developpement">\\nas.arcadie-informatique.net\Service Developpement</a>" "<a href="file://vdcsfic01.cyborg.dom/Commonmar$/Developpeurs/@DEV_TLS">\\vdcsfic01.cyborg.dom\Commonmar$\Developpeurs\@DEV_TLS</a>" /E /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:8 /LOG+:c:\Users\a09_admin\Documents\copyservicedev.txt</p>
<p>Rep Dev Exclude gros rep=&gt; robocopy "<a href="file://nas.arcadie-informatique.net/Service%20Developpement">\\nas.arcadie-informatique.net\Service Developpement</a>" "<a href="file://vdcsfic01.cyborg.dom/Commonmar$/Developpeurs/@DEV_TLS">\\vdcsfic01.cyborg.dom\Commonmar$\Developpeurs\@DEV_TLS</a>" /E /COPY:DAT /DCOPY:T /R:3 /W:5 /MT:8 /LOG+:c:\Users\a09_admin\Documents\copyservicedev.txt /XD "<a href="file://nas.arcadie-informatique.net/Service%20Developpement/Icones">\\nas.arcadie-informatique.net\Service Developpement\Icones</a>" "<a href="file://nas.arcadie-informatique.net/Service%20Developpement/Librairies%20tierces">\\nas.arcadie-informatique.net\Service Developpement\Librairies tierces</a>" "<a href="file://nas.arcadie-informatique.net/Service%20Developpement/Jeux%20d'installations">\\nas.arcadie-informatique.net\Service Developpement\Jeux d'installations</a>" "<a href="file://nas.arcadie-informatique.net/Service%20Developpement/Builds">\\nas.arcadie-informatique.net\Service Developpement\Builds</a>"</p>
<p>&nbsp;</p>
<p>Copie fichier de dossier DPM :</p>
<p>&nbsp;</p>
<p>robocopy D:\DPMVolumes \\VMARSAV01\D$\DPMVolumes /R:3 /W:5 /MT:8 /E /TEE /V /X /DST</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>MODELE BASE : copie sous rep vide + exclut fichier système + copie donnée attribut horodatage + 3 tentatives à 10 s d'intervalle + 16 thread</p>
<p>chcp 28591 &gt; nul</p>
<p>&nbsp;</p>
<p>:copy</p>
<p>&nbsp;</p>
<p>SET /p source="Entez le chemin de la source svp"&amp;</p>
<p>&nbsp;</p>
<p>SET /p destination="Entez le chemin de la destination svp"&amp;</p>
<p>&nbsp;</p>
<p>ROBOCOPY %source% %destination%&nbsp; /E /XA:S /COPY:DAT /R:3 /W:10 /MT:16 /TEE /TBD /LOG:c:\Users\mbo_admin\Desktop\copylogs.txt</p>
<p>&nbsp;</p>
<p>SET /p reponse="Voulez-vous copier d'autres dossiers ?"&amp;</p>
<p>&nbsp;</p>
<p>if "%reponse%"=="oui" goto copy</p>
<p>&nbsp;</p>
<p>exit</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>PORBL7ME AVEC LES ACCENTS:</p>
<p>La commande chcp, intégrée nativement à Windows, permet de modifier le jeu de caractère (ou « code page ») de votre système d’exploitation. Le code page 1252 est le code page original de Windows, pour l’Europe de l’ouest et donc la France. Il peut arriver que le code page d’un système ne soit pas 1252 et que les accents soient donc mal interprétés</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Syntaxe :: ROBOCOPY source destination [fichier [fichier]...] [options]</p>
<p>source :: répertoire source (lecteur:\chemin ou \\serveur\partage\chemin).</p>
<p>destination :: rép. de destination (lecteur:\chemin ou \\serveur\partage\chemin).</p>
<p>fichier :: fichier(s) à copier (noms/caractères génériques : valeur par défaut "*.*").</p>
<p>&nbsp;</p>
<p>Options de copie :</p>
<p>&nbsp;</p>
<p>/S :: copie les sous-répertoires non vides uniquement.</p>
<p>&nbsp;</p>
<p>/E :: copie les sous-répertoires, y compris les vides.</p>
<p>&nbsp;</p>
<p>/LEV:n :: copie uniquement les n premiers niveaux de l'arborescence source.</p>
<p>&nbsp;</p>
<p>Nouvelles tentatives en cas d’échec :</p>
<p>/Z :: copie les fichiers en mode de redémarrage.</p>
<p>&nbsp;</p>
<p>Retente les copies manquées en reprenant au point d’échec</p>
<p>/B :: copie les fichiers en mode de sauvegarde.</p>
<p>&nbsp;</p>
<p>Recopie les fichiers dans leur entièreté</p>
<p>/ZB :: utilise le mode de redémarrage puis si l'accès est refusé, utilise le mode de sauvegarde.</p>
<p>&nbsp;</p>
<p>/EFSRAW :: copie tous les fichiers chiffrés en mode EFS RAW.</p>
<p>&nbsp;</p>
<p>/COPY:indicateurscopie :: spécifie les éléments à copier pour les fichiers (/COPY:DAT par défaut)(indicateurscopie : D=Données, A=Attributs, T=horodaTages, S=Sécurité=ACL NTFS, O=infos prOpriétaire, U=infos d'aUdit).</p>
<p>&nbsp;</p>
<p>/DCOPY:T :: copie les horodatages de répertoire.</p>
<p>&nbsp;</p>
<p>/SEC :: copie des fichiers avec sécurité (équivaut à /COPY:DATS)</p>
<p>&nbsp;</p>
<p>Cette option ne concerne que les systèmes NTFS</p>
<p>/COPYALL :: copie toutes les infos de fichiers (équivaut à /COPY:DATSOU).</p>
<p>&nbsp;</p>
<p>/NOCOPY :: ne copie aucune info de fichier (utile avec /PURGE). Cette option empêche les copies. Elle peut être utile quand on la combine avec l’option /Purge qui fait de RoboCopy un utilitaire pour supprimer dans les dossiers dupliqués les</p>
<p>fichiers qui ont disparus de la source.</p>
<p>&nbsp;</p>
<p>/SECFIX :: corrige la sécurité de tous les fichiers, même les fichiers ignorés.</p>
<p>&nbsp;</p>
<p>/TIMFIX :: corrige les horodatages de tous les fichiers, même les fichiers ignorés.</p>
<p>&nbsp;</p>
<p>Maintien d’une réplique exacte</p>
<p>/PURGE :: supprime les fichiers/répertoires de destination qui n'existent plus dans la source.</p>
<p>/MIR :: met en MIRoir une arborescence (équivaut à /E plus /PURGE).</p>
<p>!!! Les options /Purge et /MIR sont à utiliser avec prudence puisque en cas de suppression accidentelle d’un fichier source, la copie sera supprimée à son tour !!!!</p>
<p>&nbsp;</p>
<p>/MOV :: déplace les fichiers (les supprime de la source après la copie).</p>
<p>/MOVE :: déplace les fichiers ET les répertoires (les supprime de la source après la copie).</p>
<p>&nbsp;</p>
<p>Modification des attributs après la copie</p>
<p>/A+:[RASHCNET] :: ajoute les Attributs donnés aux fichiers copiés.</p>
<p>/A-:[RASHCNET] :: supprime les Attributs donnés des fichiers copiés.</p>
<p>R = Read only (lecture seule), A = Archive, S = Système, H = Hidden (caché), C = Compressé, N = Non indexé, E = Encrypté, T= Temporaire</p>
<p>&nbsp;</p>
<p>/CREATE :: crée une arborescence et des fichiers de longueur nulle uniquement. Cette option provoque la réplication de l’arborescence des dossiers en y inscrivant le ou les emplacements des fichiers mais sans recopier ces derniers. La réplique contient donc des fichiers de longueur nulle. On retrouve donc les noms des fichiers mais pas leurs contenus.</p>
<p>&nbsp;</p>
<p>/FAT :: crée des fichiers de destination au format de nom 8.3 FAT uniquement.</p>
<p>/256 :: désactive la prise en charge des chemins d'accès très longs (&gt; 256 caractères).</p>
<p>&nbsp;</p>
<p>/MON:n :: source du moniteur ; réexécuté lorsque plus de n modifications sont observées.</p>
<p>/MOT:m :: source du moniteur ; réexécuté après m minutes en cas de modification.</p>
<p>&nbsp;</p>
<p>/RH:hhmm-hhmm :: heures d'exécution : heures auxquelles de nouvelles copies peuvent être lancées.</p>
<p>/PF :: vérifie les heures d'exécution Par Fichier (et non par passage).</p>
<p>Exemple : /RH :2200-0600 pour éviter que RoboCopy n’utilise ne monopolise trop le réseau durant les heures de bureau.</p>
<p>&nbsp;</p>
<p>/IPG:n :: délai entre les paquets (ms) pour libérer la bande passante sur les lignes bas débit « Inter-Packet Gap »&nbsp;</p>
<p>n=25 =&gt; 50% de la BP, 50 =&gt; 33% de la BP, 75=&gt; 25% de la BP, 100 =&gt; 20% de la BP, 200 =&gt; 5% de la BP de la carte (soit 50Mb/s ou 6 Mo/s d'une carte qui tourne à 1Gb/s) et non pas de la connexion WAN</p>
<p>&nbsp;</p>
<p>/SL:: copie les liens symboliques par opposition à la cible.</p>
<p>&nbsp;</p>
<p>/MT[:n] :: Effectuer des copies multi-thread avec n threads (par défaut, 8). n doit être au moins égal à 1 et pas supérieur à 128. Cette option est incompatible avec les options /IPG et /EFSRAW. Rediriger la sortie avec l'option /LOG pour de meilleures performances.</p>
<p>&nbsp;</p>
<p>Options de sélection des fichiers :</p>
<p>/A :: copie uniquement les fichiers où l'attribut Archive est défini.</p>
<p>/M :: copie uniquement les fichiers où l'attribut Archive est défini et le réinitialise.</p>
<p>/IA:[RASHCNETO] :: Inclut uniquement les fichiers où l'un des Attributs donnés est défini.</p>
<p>R = Read only (lecture seule) A = Archive S = Système H = Hidden (caché)</p>
<p>C = Compressé N = Non indexé E = Encrypté T= Temporaire O = Offline</p>
<p>/XA:[RASHCNETO] :: eXclut les fichiers où l'un des Attributs donnés est défini.</p>
<p>/XF fichier [fichier]... :: eXclut les fichiers correspondant aux noms/chemins/caractères génériques</p>
<p>donnés.</p>
<p><a href="http://www.courstechinfo.be/Luc%20De%20Mey%20OS/RoboCopy.pdf">http://www.courstechinfo.be/Luc De Mey OS/RoboCopy.pdf</a> 3</p>
<p>/XD répertoires [répertoires]... :: eXclut les répertoires correspondant à des noms/chemins donnés.</p>
<p>/XC :: eXclut les fichiers Changés.</p>
<p>« eXclude Changed » Ne pas prendre en compte les fichiers qui ne diffèrent que par leurs</p>
<p>tailles et non pas par l’heure de la dernière modification</p>
<p>/XN :: eXclut les fichiers Nouveaux.</p>
<p>« eXclude Newer » Exclure les fichiers qui ont été modifiés plus récemment sur la source que</p>
<p>sur la destination</p>
<p>/XO :: eXclut les fichiers anciens.</p>
<p>« eXclude Old » Ne pas copier les fichiers qui du côté source ont une date plus ancienne que</p>
<p>du côté de la destination</p>
<p>C’est l’option la plus appropriée pour faire la synchronisation de deux dossiers. On s’assure</p>
<p>que le fichier le plus récents sont de part et d’autre en faisant nue copie avec cette option /XO</p>
<p>dans un sens puis dans l’autre.</p>
<p>/XX :: eXclut les fichiers et répertoires supplémentaires.</p>
<p>« eXclude eXtra» Ne pas considérer les fichiers qui sont dans la destination sans être</p>
<p>présents du côté source</p>
<p>/XL :: eXclut les fichiers et répertoires solitaires.</p>
<p>« eXclude Lonely » Ne pas considérer les fichiers qui sont présents dans la source mais sont</p>
<p>absents dans la destination</p>
<p>/IS :: Inclut les mêmeS fichiers.</p>
<p>« Include Same » Inclure les fichiers qui sont identiques en tous points (taille, heure,</p>
<p>attributs)</p>
<p>/IT :: Inclut les fichiers optimisés.</p>
<p>« Include Tweaked » Inclure les fichiers "tordus" (traduction littérale) Il s’agit des fichiers</p>
<p>qui ne diffèrent entre la source et la destination que par certains attributs et non pas par la</p>
<p>taille ou par l’heure de la dernière modification.</p>
<p>/MAX:n :: taille de fichier maximale : exclut les fichiers de taille supérieure à n octets.</p>
<p>/MIN:n :: taille de fichier minimale : exclut les fichiers de taille inférieure à n octets.</p>
<p>/MAXAGE:n :: Antériorité maximale du fichier :</p>
<p>exclut les fichiers plus anciens que n jours/qu'une date n.</p>
<p>/MINAGE:n :: Antériorité minimale du fichier :</p>
<p>exclut les fichiers plus récents que n jours/qu'une date n.</p>
<p>/MAXLAD:n :: dernière date d'accès MAXimale : exclut les fichiers inutilisés depuis n.</p>
<p>/MINLAD:n :: dernière date d'accès MINimale : exclut les fichiers utilisés depuis n.</p>
<p>(si n &lt; 1900, alors n = n jours, sinon n = date JJMMAAA).</p>
<p>/XJ :: eXclut les points de Jonction (normalement inclus par défaut).</p>
<p>/FFT :: suppose des heures de fichier FAT (granularité de 2 secondes).</p>
<p>/DST :: compense les différences d'heure d'été d'une heure.</p>
<p>/XJD :: eXclut les points de Jonction pour les répertoires.</p>
<p>/XJF :: eXclut les points de Jonction pour les Fichiers.</p>
<p><a href="http://www.courstechinfo.be/Luc%20De%20Mey%20OS/RoboCopy.pdf">http://www.courstechinfo.be/Luc De Mey OS/RoboCopy.pdf</a> 4</p>
<p>Options de nouvelle tentative :</p>
<p>/R:n :: nombre de tentatives après l'échec de copies : 1 million par défaut.</p>
<p>/W:n :: délai entre les tentatives : 30 secondes par défaut.</p>
<p>Lors de sauvegardes via le réseau, certains accès peuvent momentanément ne pas réussir. Il</p>
<p>est alors normal de faire de nouvelles tentatives. Mais les échecs peuvent être dus aussi à des</p>
<p>autorisations refusées. Les nouvelles tentatives seront elles aussi infructueuses. En insistant</p>
<p>trop longtemps on ne fera que ralentir la commande en ce qui concerne les autres fichiers.</p>
<p>/REG :: enregistre /R:n et /W:n comme paramètres par défaut dans le Registre.</p>
<p>/TBD :: attend la détermination des noms de partage (erreur de nouvelle tentative 67).</p>
<p>Options d'enregistrement dans le journal :</p>
<p>/L :: Liste uniquement : pas de copie, d'horodatage ou de suppression de fichiers.</p>
<p>L’option /L s’utilise pour simuler la commande sans qu’aucune modification ne soit faite.</p>
<p>Cette option est très utile pour la mise au point des scripts qui font appel à RoboCopy.</p>
<p>/X :: signale tous les fichiers supplémentaires et pas uniquement ceux sélectionnés.</p>
<p>/V :: produit un résultat détaillé en affichant les fichiers ignorés.</p>
<p>/TS :: inclut les horodaTageS des fichiers sources dans le résultat.</p>
<p>/FP :: inclut le chemin d'accès complet des fichiers dans le résultat.</p>
<p>/BYTES :: affiche les tailles en octets.</p>
<p>/NS :: pas de taille : n'enregistre pas les tailles de fichier.</p>
<p>/NC :: pas de classe : n'enregistre pas les classes de fichier.</p>
<p>/NFL :: pas de liste de fichiers : n'enregistre pas les noms de fichiers.</p>
<p>/NDL :: pas de liste de répertoires : n'enregistre pas les noms de répertoire.</p>
<p>/NP :: pas de compteur de progression : n'affiche pas le pourcentage copié.</p>
<p>/ETA :: affiche l'heure de fin estimée de la copie des fichiers.</p>
<p>/LOG:fichier :: copie le statut dans le fichier journal (remplace le journal existant).</p>
<p>/LOG+:fichier :: copie le statut dans le fichier journal (ajoute au journal existant).</p>
<p>/UNILOG:fichier :: copie le statut dans le fichier journal en Unicode (remplace le journal</p>
<p>existant).</p>
<p>/UNILOG+:fichier :: copie le statut dans le fichier journal en Unicode (ajoute au journal existant).</p>
<p>/TEE :: résultat dans la fenêtre de la console et dans le fichier journal.</p>
<p>/NJH :: pas d'en-tête de tâche.</p>
<p>/NJS :: pas de résumé de tâche.</p>
<p>/UNICODE :: sortie au format UNICODE.</p>
<p>Options de tâche :</p>
<p>/JOB:NomTâche :: prend les paramètres du fichier de tâche nommé.</p>
<p>/SAVE:NomTâche :: enregistre les paramètres dans le fichier nommé</p>
<p>/QUIT :: arrête après traitement de la ligne de commande (pour afficher les paramètres).</p>
<p>/NOSD :: aucun répertoire source spécifié.</p>
<p>/NODD :: aucun répertoire de destination spécifié.</p>
<p>/IF :: Inclut les fichiers suivants.</p>
