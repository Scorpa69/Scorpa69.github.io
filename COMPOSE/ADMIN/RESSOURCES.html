<!--
title: RESSOURCES
description: 
published: true
date: 2023-11-27T09:42:18.418Z
tags: 
editor: ckeditor
dateCreated: 2023-09-18T12:40:08.145Z
-->

<h1>Limitation des ressources</h1>
<h2>Compose avec limitation des ressources cpu et memoire : Validé</h2>
<pre><code class="language-plaintext">version: "3.9"
services:
  web-server:
    image: nginx:alpine
    container_name: res-limits-demo
    deploy:
      resources:
        limits:
          pids: 20
          cpus: '0.30'
          memory: 1G
        reservations:
          cpus: '0.2'
          memory: 512M
    memswap_limit: 1G 
    #doit au mini être égal à la valeur limits, la valeur de swap dispo pour le conteneur = memory(limits) - memswap_limits</code></pre>
<p>Pour le CPU on peut mettre “.5” ou “1.5” si besoin</p>
<h1>A TESTER :</h1>
<h2>Limitation des ressources de docker à 75 % du cpu et 800Mo de mémoire</h2>
<p>Create a file to <code>nano /etc/systemd/system/docker_limit.slice</code></p>
<pre><code class="language-plaintext">[Unit]
Description=Slice that limits docker resources
Before=slices.target

[Slice]
CPUAccounting=true
CPUQuota=75%
#Memory Management
MemoryAccounting=true
MemoryLimit=800M
</code></pre>
<p>Start unit: <code>systemctl start docker_limit.slice</code></p>
<p>Edit <code>nano&nbsp;/etc/docker/daemon.json</code></p>
<pre><code class="language-plaintext">{
  "cgroup-parent": "/docker_limit.slice"
}
</code></pre>
<p>Restart Docker daemon: <code>systemctl restart docker</code>&nbsp;</p>
