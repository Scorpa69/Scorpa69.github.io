<!--
title: SECRETS
description: 
published: true
date: 2023-09-28T12:51:06.239Z
tags: 
editor: ckeditor
dateCreated: 2023-09-18T12:40:09.754Z
-->

<h1>Exemple d'utilisation avec docker secret avec SWARM activé obligatoirement</h1>
<p>Création du ou des secrets</p>
<p><code>echo P@55w0rd | docker secret create db_password -</code></p>
<pre><code class="language-plaintext">version: "3"
services:
 app:
   image: example-app:latest
   secrets:
     - db_password
secrets:
   db_password:
     external: true</code></pre>
<h1>Exemple d'utilisation avec Fichier sans SWARM</h1>
<p>ATTENTION, BIEN AJOUTER LE _FILE AU NOM DE LA VARIABLE D'ENVIRONNEMENT</p>
<pre><code class="language-plaintext">version: "3.9"

services:
  db:
    image: mysql:latest
    volumes:
      - db_data:/var/lib/mysql
    environment:
      MYSQL_ROOT_PASSWORD_FILE: /run/secrets/db_root_password
      MYSQL_DATABASE: wordpress
      MYSQL_USER: wordpress
      MYSQL_PASSWORD_FILE: /run/secrets/db_password
    secrets:
      - db_root_password
      - db_password

  wordpress:
    depends_on:
      - db
    image: wordpress:latest
    ports:
      - "8000:80"
    environment:
      WORDPRESS_DB_HOST: db:3306
      WORDPRESS_DB_USER: wordpress
      WORDPRESS_DB_PASSWORD_FILE: /run/secrets/db_password
    secrets:
      - db_password


secrets:
  db_password:
    file: db_password.txt
  db_root_password:
    file: db_root_password.txt

volumes:
   db_data:</code></pre>
