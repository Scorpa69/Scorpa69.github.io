<!--
title: COMPOSE
description: 
published: true
date: 2024-02-16T15:55:27.357Z
tags: 
editor: ckeditor
dateCreated: 2024-02-05T16:09:34.083Z
-->

<h1>Exemple en prod</h1>
<pre><code class="language-plaintext">Name
ci-odt-api-caddy
Image
caddy:latest
Ports
80, 443
CPU cores
0.5
Memory
0.5 GiB
GPU SKU
None
GPU count
0
Commands
[ "caddy", "reverse-proxy", "--from", "fac-odt-api.francecentral.azurecontainer.io", "--to", "localhost:8080" ]
Environment variables
Key
Value
No environment variables
Volumes
Name
Volume type
Mount path
Properties
filesharevolume
Azure file
/data/
{ "shareName": "ci-share-odt-api", "storageAccountName": "stodt" }</code></pre>
<pre><code class="language-plaintext">Name
ci-odt-api
Image
dependencytrack/apiserver:4.7.0
Ports
8080
CPU cores
2
Memory
4.5 GiB
GPU SKU
None
GPU count
0
Commands
(no commands)
Environment variables
Key
Value
ALPINE_DATABASE_MODE
external
ALPINE_DATABASE_URL
jdbc:postgresql://psql-odt-api.postgres.database.azure.com:5432/odt?sslmode=require
ALPINE_DATABASE_DRIVER
org.postgresql.Driver
ALPINE_DATABASE_USERNAME
dbuser_odt@psql-odt-api
ALPINE_DATABASE_PASSWORD
mdp
ALPINE_DATABASE_POOL_ENABLED
true
ALPINE_DATABASE_POOL_MAX_SIZE
20
ALPINE_DATABASE_POOL_MIN_IDLE
10
ALPINE_DATABASE_POOL_IDLE_TIMEOUT
300000
ALPINE_DATABASE_POOL_MAX_LIFETIME
600000
Volumes
Name
Volume type
Mount path
Properties
filesharevolume
Azure file
/data/
{ "shareName": "ci-share-odt-api", "storageAccountName": "stodt" }</code></pre>
<h1>Password-Pusher</h1>
<pre><code class="language-plaintext">apiVersion: 2019-12-01
location: francecentral
name: transfert
properties:
  containers:
  - name: ppu-mysql
    properties:
      image: pglombardo/pwpush-mysql:1.35.0
      resources:
        requests:
          cpu: 1
          memoryInGb: 1
      ports:
      - port: 5100
  - name: mysql
    properties:
      image: mysql:8.0.35-debian
      resources:
        requests:
          cpu: 1
          memoryInGb: 1
      ports
      - prot: 3306
tags: {Cost Center: DSI Infra}
type: Microsoft.ContainerInstance/containerGroups </code></pre>
<h1>Exemple Microsoft :</h1>
<pre><code class="language-plaintext">apiVersion: 2019-12-01
location: eastus
name: myContainerGroup
properties:
 containers:
 - name: aci-tutorial-app
   properties:
     image: mcr.microsoft.com/azuredocs/aci-helloworld:latest
     resources:
       requests:
         cpu: 1
         memoryInGb: 1.5
     ports:
     - port: 80
     - port: 8080
 - name: aci-tutorial-sidecar
   properties:
     image: mcr.microsoft.com/azuredocs/aci-tutorial-sidecar
     resources:
       requests:
         cpu: 1
         memoryInGb: 1.5
 osType: Linux
 ipAddress:
   type: Public
   ports:
   - protocol: tcp
     port: 80
   - protocol: tcp
     port: 8080
tags: {exampleTag: tutorial}
type: Microsoft.ContainerInstance/containerGroups</code></pre>
<h1>Référence Microsoft :</h1>
<pre><code class="language-plaintext">name: string  # Name of the container group
apiVersion: '2021-10-01'
location: string
tags: {}
identity: 
  type: string
  userAssignedIdentities: {}
properties: # Properties of container group
  containers: # Array of container instances in the group
  - name: string # Name of an instance
    properties: # Properties of an instance
      image: string # Container image used to create the instance
      command:
      - string
      ports: # External-facing ports exposed on the instance, must also be set in group ipAddress property 
      - protocol: string
        port: integer
      environmentVariables:
      - name: string
        value: string
        secureValue: string
      resources: # Resource requirements of the instance
        requests:
          memoryInGB: number
          cpu: number
          gpu:
            count: integer
            sku: string
        limits:
          memoryInGB: number
          cpu: number
          gpu:
            count: integer
            sku: string
      volumeMounts: # Array of volume mounts for the instance
      - name: string
        mountPath: string
        readOnly: boolean
      livenessProbe:
        exec:
          command:
          - string
        httpGet:
          httpHeaders:
          - name: string
            value: string
          path: string
          port: integer
          scheme: string
        initialDelaySeconds: integer
        periodSeconds: integer
        failureThreshold: integer
        successThreshold: integer
        timeoutSeconds: integer
      readinessProbe:
        exec:
          command:
          - string
        httpGet:
          httpHeaders:
          - name: string
            value: string
          path: string
          port: integer
          scheme: string
        initialDelaySeconds: integer
        periodSeconds: integer
        failureThreshold: integer
        successThreshold: integer
        timeoutSeconds: integer
  imageRegistryCredentials: # Credentials to pull a private image
  - server: string
    username: string
    password: string
    identity: string
    identityUrl: string
  restartPolicy: string
  ipAddress: # IP address configuration of container group
    ports:
    - protocol: string
      port: integer
    type: string
    ip: string
    dnsNameLabel: string
    dnsNameLabelReusePolicy: string
  osType: string
  volumes: # Array of volumes available to the instances
  - name: string
    azureFile:
      shareName: string
      readOnly: boolean
      storageAccountName: string
      storageAccountKey: string
    emptyDir: {}
    secret: {}
    gitRepo:
      directory: string
      repository: string
      revision: string
  diagnostics:
    logAnalytics:
      workspaceId: string
      workspaceKey: string
      workspaceResourceId: string
      logType: string
      metadata: {}
  subnetIds: # Subnet to deploy the container group into
    - id: string
      name: string
  dnsConfig: # DNS configuration for container group
    nameServers:
    - string
    searchDomains: string
    options: string
  sku: string # SKU for the container group
  encryptionProperties:
    vaultBaseUrl: string
    keyName: string
    keyVersion: string
  initContainers: # Array of init containers in the group
  - name: string
    properties:
      image: string
      command:
      - string
      environmentVariables:
      - name: string
        value: string
        secureValue: string
      volumeMounts:
      - name: string
        mountPath: string
        readOnly: boolean</code></pre>
