<!--
title: BDD UPDATE ERREUR
description: 
published: true
date: 2023-09-18T12:39:27.729Z
tags: zabbix, ldap
editor: ckeditor
dateCreated: 2023-09-18T12:39:26.344Z
-->

<h1>PROBLEME UPDATE BASE</h1>
<p>Message d'erreur : tail -f /var/log/zabbix/zabbix_server.log</p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 Starting Zabbix Server. Zabbix 6.2.0 (revision db780895726).</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 ****** Enabled features ******</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 SNMP monitoring: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; YES</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 IPMI monitoring: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; YES</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 Web monitoring: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;YES</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 VMware monitoring: &nbsp; &nbsp; &nbsp; &nbsp; YES</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 SMTP authentication: &nbsp; &nbsp; &nbsp; YES</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 ODBC: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;YES</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 SSH support: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; YES</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 IPv6 support: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;YES</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 TLS support: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; YES</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 ******************************</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.041 using configuration file: /etc/zabbix/zabbix_server.conf</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.056 current database version (mandatory/optional): 06010048/06010048</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.056 required mandatory version: 06020000</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.056 starting automatic database upgrade</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.056 [Z3005] query failed: [1419] You do not have the SUPER privilege and binary logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable) [create trigger hosts_insert after insert on hosts</mark></p>
<p><mark class="marker-yellow">for each row</mark></p>
<p><mark class="marker-yellow">insert into changelog (object,objectid,operation,clock)</mark></p>
<p><mark class="marker-yellow">values (1,new.hostid,1,unix_timestamp())]</mark></p>
<p><mark class="marker-yellow">1595886:20220711:103332.057 database upgrade failed</mark></p>
<p>POUR RESOUDRE :</p>
<ol>
  <li>systemctl stop zabbix-server</li>
  <li>systemctl stop mysqld</li>
  <li>nano /etc/mysql/mysql.conf.d/mysqld.cnf</li>
  <li>puis ajouter la ligne : skip-log-bin juste en dessous de [mysqld]</li>
  <li>systemctl start mysqld</li>
  <li>systemctl start zabbix-server</li>
  <li>Wait till the upgrade is completed: tail -999f /var/log/zabbix/zabbix_server.log pour voir si la base à fini l'upgrade</li>
  <li>systemctl stop zabbix-server</li>
  <li>commenter la ligne ajouté ci-dessus dans le fichier de conf mysqld.cnf</li>
  <li>systemctl restart mysqld</li>
  <li>systemctl start zabbix-server</li>
</ol>
<p>FIN</p>
